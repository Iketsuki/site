<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ•¸å­¸åˆ©æ˜¯ - ğŸ§§çŸ¥è­˜è²¡å¯Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+HK:wght@700&display=swap');

        body {
            background-color: #fff5f5;
            font-family: system-ui, -apple-system, sans-serif;
            overflow: hidden;
            height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lucky-font { font-family: 'Noto Serif HK', serif; }

        /* Envelope Styling */
        .envelope-box {
            position: relative;
            width: 240px;
            height: 340px;
            background: linear-gradient(145deg, #e63946, #b91c1c);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        /* The Paper Slip */
        .paper-slip {
            position: absolute;
            width: 210px;
            height: 300px;
            background: #fffdf5;
            padding: 16px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 10;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            cursor: pointer;
            overflow: hidden; /* Container itself shouldn't scroll */
        }

        /* State Transitions */
        .is-open .paper-slip {
            transform: translateY(-240px);
        }

        /* Fullscreen View Logic */
        .is-zoomed .paper-slip {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            transform: none !important;
            z-index: 100;
            padding: 40px 20px;
            border-radius: 0;
            background: #fffdf5;
        }

        .close-zoom {
            display: none;
            position: absolute;
            top: 20px;
            right: 20px;
            background: #b91c1c;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 110;
        }

        .is-zoomed .close-zoom { display: flex; }

        /* Scrollable Content Area */
        .content-scrollable {
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: #fecaca transparent;
        }

        /* Typography Adjustments */
        #math-text {
            font-size: 0.9rem;
            line-height: 1.4;
            word-wrap: break-word;
        }

        #blessing-display {
            font-size: 0.85rem;
            line-height: 1.5;
            word-wrap: break-word;
        }

        /* Responsive Scaling for Zoomed State */
        .is-zoomed #math-text { font-size: 1.2rem; }
        .is-zoomed #math-latex { font-size: 1.5rem; }
        .is-zoomed #blessing-display { font-size: 1.1rem; }

        /* Hide scrollbar for Chrome/Safari */
        .content-scrollable::-webkit-scrollbar {
            width: 4px;
        }
        .content-scrollable::-webkit-scrollbar-thumb {
            background-color: #fecaca;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <div id="app-container" class="relative">
        
        <!-- The Paper (Random Content Container) -->
        <div id="paper" class="paper-slip" onclick="zoomPaper(event)">
            <div class="close-zoom" onclick="closeZoom(event)">âœ•</div>
            
            <div class="content-scrollable">
                <div class="math-display">
                    <p id="math-text" class="text-gray-600 mb-2"></p>
                    <div id="math-latex" class="text-gray-900"></div>
                </div>
            </div>

            <div class="mt-2 border-t border-red-100 pt-3 w-full shrink-0">
                <p id="blessing-display" class="lucky-font text-red-700"></p>
            </div>
        </div>

        <!-- The Envelope Body -->
        <div id="envelope" class="envelope-box" onclick="openEnvelope()">
            <div class="lucky-font text-yellow-400 text-6xl mb-4">ç¦</div>
            <div class="w-16 h-16 rounded-full bg-yellow-500 border-4 border-red-800 flex items-center justify-center text-red-800 font-bold shadow-inner text-2xl">
                å‰
            </div>
            <p class="absolute bottom-6 text-yellow-400/50 lucky-font text-xs tracking-widest">é»æ“Šæ‹†åˆ©æ˜¯</p>
        </div>

    </div>

    <script>
        const mathProblems = [
            { text: "Let $a$, $b$ and $c$ be non-zero numbers such that $\\frac{a}{b} = \\frac{2}{3}$ and $5a = 2c$. Find", latex: "$$\\frac{a+3b}{b+6c}$$" },
            { text: "A cyclist travels from town $A$ to town $B$ at an average speed of 20 km/h and then he travels from town $B$ to town $C$ at an average speed of 24 km/h. It is given that the cyclist travels 28 km in 75 minutes for the whole journey. How long does the cyclist take to travel from town $A$ to town $B$?" , latex: ""},
            { text: "In a library, the ratio of the number of male readers to the number of female readers is $4 : 5$. If 14 male readers and 22 female readers enter the library, then the ratio of the number of male readers to the number of female readers is $3 : 4$. Find the original number of female readers in the library." , latex: ""},
            { text: "Factorize:", latex: "(a) $p^2 - 9q^2$, (b) $p^2 - 9q^2 + 5p - 15q$" },
            { text: "Factorize:", latex: "(a) $m^3 + m^2n + 4m^2$, (b) $m^3 + m^2n + 4m^2 - m - n - 4$" },
            { text: "Factorize:", latex: "(a) $2a + 8b$, (b) $a^2 + ab - 12b^2$, (c) $2a + 8b + a^2 + ab - 12b^2$" },
            { text: "Make $q$ the subject of the formula", latex: "$$\\frac{2q-3}{p} = 5$$" },
            { text: "Make $p$ the subject of the formula", latex: "$$9(p + 8q) = 5p + 4$$" },
            { text: "Make $y$ the subject of the formula", latex: "$$\\frac{x}{2} = \\frac{y+4}{3}$$" },
            { text: "Make $b$ the subject of the formula", latex: "$$\\frac{4}{a} - \\frac{3}{b} = 1$$" },
            { text: "Consider the formula $u + 12v = 3(8 - u)$. (a) Make $u$ the subject of the above formula. (b) If the value of $v$ is decreased by 3, write down the change in the value of $u$.", latex: "" },
            { text: "Simplify", latex: "$$\\frac{1}{x+1} - \\frac{6}{6x-1}$$" }
        ];

        const blessingMessages = [
            "åšå­¸å¯©å•ï¼Œæ…æ€æ˜è¾¨",
            "é’å‡ºæ–¼è—ï¼Œè€Œå‹æ–¼è—",
            "æ›¸å±±æœ‰è·¯å‹¤ç‚ºå¾‘",
            "æº«æ•…è€ŒçŸ¥æ–°",
            "ç™¾å°ºç«¿é ­ï¼Œæ›´é€²ä¸€æ­¥",
            "å­¸è€Œä¸å­ï¼Œèª¨äººä¸å€¦",
            "å¤§å‰å¤§åˆ©ï¼Œå­¸æ¥­é€²æ­¥",
            "æ•¬ç•è€¶å’Œè¯æ˜¯æ™ºæ…§çš„é–‹ç«¯ï¼›å‡¡éµè¡Œä»–å‘½ä»¤çš„æ˜¯è°æ˜äººã€‚(è©©ç¯‡ 111:10)",
            "ä½ è¦å°ˆå¿ƒä»°è³´è€¶å’Œè¯ï¼Œä¸å¯å€šé è‡ªå·±çš„è°æ˜ã€‚(ç®´è¨€ 3:5)",
            "æ™ºæ…§å¿…å…¥ä½ å¿ƒï¼›ä½ çš„éˆè¦ä»¥çŸ¥è­˜ç‚ºç¾ã€‚(ç®´è¨€ 2:10)",
            "æ‚£é›£ç”Ÿå¿è€ï¼Œå¿è€ç”Ÿè€ç·´ï¼Œè€ç·´ç”Ÿç›¼æœ›ã€‚(ç¾…é¦¬æ›¸ 5:3-4)",
            "ä½ å€‘ä¸­é–“è‹¥æœ‰ç¼ºå°‘æ™ºæ…§çš„ï¼Œæ‡‰ç•¶æ±‚é‚£åšè³œèˆ‡çœ¾äººã€ä¹Ÿä¸æ–¥è²¬äººçš„ç¥ï¼Œä¸»å°±å¿…è³œçµ¦ä»–ã€‚(é›…å„æ›¸ 1:5)",
            "æ•™å°æ™ºæ…§äººï¼Œä»–å°±è¶Šç™¼æœ‰æ™ºæ…§ï¼›æŒ‡ç¤ºç¾©äººï¼Œä»–å°±å¢é•·å­¸å•ã€‚(ç®´è¨€ 9:9)",
            "ä½†é‚£ç­‰å€™è€¶å’Œè¯çš„å¿…å¾æ–°å¾—åŠ›ã€‚ä»–å€‘å¿…å¦‚é·¹å±•ç¿…ä¸Šé¨°ï¼›ä»–å€‘å¥”è·‘å»ä¸å›°å€¦ã€‚(ä»¥è³½äºæ›¸ 40:31)",
            "å¾—æ™ºæ…§ï¼Œå¾—è°æ˜çš„ï¼Œé€™äººä¾¿ç‚ºæœ‰ç¦ã€‚(ç®´è¨€ 3:13)",
            "å´è€³è½æ™ºæ…§ï¼Œå°ˆå¿ƒæ±‚è°æ˜ã€‚(ç®´è¨€ 2:2)",
            "æ™ºæ…§äººå¤§å¤§èƒ½åŠ›ï¼›æœ‰çŸ¥è­˜çš„äººåŠ›ä¸ŠåŠ åŠ›ã€‚(ç®´è¨€ 24:5)",
            "ä½ å€‘è¦å¿«å¿«çš„è½ï¼Œæ…¢æ…¢çš„èªªï¼Œæ…¢æ…¢çš„å‹•æ€’ã€‚(é›…å„æ›¸ 1:19)",
            "è°æ˜äººçš„å¿ƒå¾—çŸ¥è­˜ï¼Œæ™ºæ…§äººçš„è€³æ±‚çŸ¥è­˜ã€‚(ç®´è¨€ 18:15)"
        ];

        let state = 'closed';

        function openEnvelope() {
            if (state !== 'closed') return;
            
            const problem = mathProblems[Math.floor(Math.random() * mathProblems.length)];
            document.getElementById('math-text').innerText = problem.text;
            document.getElementById('math-latex').innerHTML = problem.latex;

            const blessing = blessingMessages[Math.floor(Math.random() * blessingMessages.length)];
            document.getElementById('blessing-display').innerText = blessing;

            if (window.MathJax) {
                MathJax.typesetPromise();
            }

            document.getElementById('app-container').classList.add('is-open');
            state = 'open';
        }

        function zoomPaper(event) {
            if (state !== 'open') return;
            event.stopPropagation();
            document.getElementById('app-container').classList.add('is-zoomed');
            state = 'zoomed';
        }

        function closeZoom(event) {
            event.stopPropagation();
            document.getElementById('app-container').classList.remove('is-zoomed');
            document.getElementById('app-container').classList.remove('is-open');
            state = 'closed';
        }
    </script>
</body>
</html>
