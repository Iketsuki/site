

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªç©ºæ’åºæ¼”ç®—æ³•è¦–è¦ºåŒ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0a0a1a;
            color: #e0e0ff;
            overflow-x: hidden;
        }
        
        .space-bg {
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            animation: twinkle 4s infinite ease-in-out;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .glow-text {
            text-shadow: 0 0 10px rgba(100, 220, 255, 0.7);
        }
        
        .glow-border {
            box-shadow: 0 0 15px rgba(100, 220, 255, 0.5);
        }
        
        .planet {
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.5s ease;
            box-shadow: 0 0 15px rgba(100, 220, 255, 0.5);
        }
        
        .algorithm-card {
            background: rgba(20, 30, 60, 0.7);
            border-radius: 1rem;
            border: 2px solid rgba(100, 220, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .algorithm-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(100, 220, 255, 0.7);
        }
        
        .btn-cosmic {
            background: linear-gradient(135deg, #4b0082, #9400d3);
            color: white;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 10px rgba(148, 0, 211, 0.5);
        }
        
        .btn-cosmic:hover {
            box-shadow: 0 0 15px rgba(148, 0, 211, 0.8);
            transform: translateY(-2px);
        }
        
        .orbit {
            position: relative;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 1px dashed rgba(100, 220, 255, 0.3);
            margin: 0 auto;
        }
        
        .orbit-planet {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(100, 220, 255, 0.5);
        }
        
        @keyframes orbit {
            0% { transform: rotate(0deg) translateX(120px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(120px) rotate(-360deg); }
        }
        
        .step-container {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .step-card {
            scroll-snap-align: start;
            flex: 0 0 auto;
            width: 280px;
            background: rgba(20, 30, 60, 0.7);
            border-radius: 1rem;
            border: 2px solid rgba(100, 220, 255, 0.3);
            padding: 1rem;
        }
        
        pre {
            background: rgba(10, 15, 30, 0.8);
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            color: #64ffda;
            border: 1px solid rgba(100, 220, 255, 0.2);
            margin: 1rem 0;
            font-family: monospace;
        }
        
        .code-tab {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem 0.5rem 0 0;
            background: rgba(30, 40, 70, 0.7);
            border: 1px solid rgba(100, 220, 255, 0.2);
            border-bottom: none;
            display: inline-block;
            margin-bottom: -1px;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="space-bg" id="starfield"></div>
    
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold mb-4 glow-text">å¤ªç©ºæ’åºæ¼”ç®—æ³•è¦–è¦ºåŒ–</h1>
            <p class="text-xl">æ¢ç´¢å®‡å®™ä¸­çš„æ’åºæ¼”ç®—æ³•å¥§ç§˜</p>
        </header>
        
        <div class="orbit mb-16">
            <div class="orbit-planet bg-purple-500" style="width: 40px; height: 40px; animation: orbit 10s linear infinite;">5</div>
            <div class="orbit-planet bg-blue-400" style="width: 30px; height: 30px; animation: orbit 7s linear infinite; animation-delay: -2s;">2</div>
            <div class="orbit-planet bg-green-400" style="width: 35px; height: 35px; animation: orbit 12s linear infinite; animation-delay: -5s;">8</div>
            <div class="orbit-planet bg-pink-400" style="width: 25px; height: 25px; animation: orbit 8s linear infinite; animation-delay: -3s;">1</div>
            <div class="orbit-planet bg-yellow-300" style="width: 28px; height: 28px; animation: orbit 9s linear infinite; animation-delay: -7s;">4</div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
            <div class="algorithm-card p-6 glow-border">
                <div class="flex items-center mb-4">
                    <span class="text-4xl mr-3">ğŸª</span>
                    <h2 class="text-2xl font-bold glow-text">é¸æ“‡æ’åº (Selection Sort)</h2>
                </div>
                <p class="mb-4">é¸æ“‡æ’åºå°±åƒåœ¨å¤ªç©ºä¸­å°‹æ‰¾æœ€äº®çš„æ˜Ÿæ˜Ÿã€‚æ¯æ¬¡å¾æœªæ’åºçš„è¡Œæ˜Ÿä¸­æ‰¾å‡ºæœ€å°çš„ä¸€é¡†ï¼Œæ”¾åˆ°å·²æ’åºå€åŸŸçš„æœ«å°¾ã€‚</p>
                <div class="code-tab">Python ä»£ç¢¼</div>
                <pre>def selection_sort(arr):
    n = len(arr)
    
    # éæ­·æ‰€æœ‰æ•¸çµ„å…ƒç´ 
    for i in range(n):
        # æ‰¾åˆ°æœªæ’åºéƒ¨åˆ†ä¸­çš„æœ€å°å…ƒç´ 
        min_idx = i
        for j in range(i+1, n):
            if arr[j] < arr[min_idx]:
                min_idx = j
                
        # å°‡æ‰¾åˆ°çš„æœ€å°å…ƒç´ èˆ‡ç¬¬ä¸€å€‹æœªæ’åºå…ƒç´ äº¤æ›
        arr[i], arr[min_idx] = arr[min_idx], arr[i]
    
    return arr</pre>
                <button class="btn-cosmic mt-4" onclick="showAlgorithm('selection')">æŸ¥çœ‹æ¼”ç¤º</button>
            </div>
            
            <div class="algorithm-card p-6 glow-border">
                <div class="flex items-center mb-4">
                    <span class="text-4xl mr-3">ğŸ›°ï¸</span>
                    <h2 class="text-2xl font-bold glow-text">å†’æ³¡æ’åº (Bubble Sort)</h2>
                </div>
                <p class="mb-4">å†’æ³¡æ’åºå°±åƒæ°£æ³¡åœ¨å¤ªç©ºä¸­ä¸Šå‡ã€‚è¼ƒå¤§çš„è¡Œæ˜Ÿæœƒä¸æ–·ã€Œä¸Šæµ®ã€ï¼Œç›´åˆ°æ‰€æœ‰è¡Œæ˜Ÿéƒ½æŒ‰ç…§å¤§å°æ’åˆ—å¥½ã€‚</p>
                <div class="code-tab">Python ä»£ç¢¼</div>
                <pre>def bubble_sort(arr):
    n = len(arr)
    
    # éæ­·æ‰€æœ‰æ•¸çµ„å…ƒç´ 
    for i in range(n):
        # æœ€å¾Œiå€‹å…ƒç´ å·²ç¶“å°±ä½
        for j in range(0, n-i-1):
            # å¦‚æœç•¶å‰å…ƒç´ å¤§æ–¼ä¸‹ä¸€å€‹å…ƒç´ ï¼Œå‰‡äº¤æ›
            if arr[j] > arr[j+1]:
                arr[j], arr[j+1] = arr[j+1], arr[j]
    
    return arr</pre>
                <button class="btn-cosmic mt-4" onclick="showAlgorithm('bubble')">æŸ¥çœ‹æ¼”ç¤º</button>
            </div>
            
            <div class="algorithm-card p-6 glow-border">
                <div class="flex items-center mb-4">
                    <span class="text-4xl mr-3">ğŸš€</span>
                    <h2 class="text-2xl font-bold glow-text">æ’å…¥æ’åº (Insertion Sort)</h2>
                </div>
                <p class="mb-4">æ’å…¥æ’åºå°±åƒå¤ªç©ºç«™æ•´ç†æ–°åˆ°é”çš„é£›èˆ¹ã€‚æ¯æ¬¡å–ä¸€é¡†æ–°è¡Œæ˜Ÿï¼Œå°‡å®ƒæ’å…¥åˆ°å·²æ’åºå¥½çš„è¡Œæ˜Ÿåºåˆ—ä¸­çš„é©ç•¶ä½ç½®ã€‚</p>
                <div class="code-tab">Python ä»£ç¢¼</div>
                <pre>def insertion_sort(arr):
    # éæ­·å¾ç¬¬äºŒå€‹å…ƒç´ åˆ°æœ€å¾Œä¸€å€‹å…ƒç´ 
    for i in range(1, len(arr)):
        key = arr[i]  # ç•¶å‰è¦æ’å…¥çš„å…ƒç´ 
        
        # å°‡æ¯”keyå¤§çš„å…ƒç´ å‘å³ç§»å‹•
        j = i-1
        while j >= 0 and key < arr[j]:
            arr[j+1] = arr[j]
            j -= 1
        arr[j+1] = key  # æ’å…¥keyåˆ°æ­£ç¢ºä½ç½®
    
    return arr</pre>
                <button class="btn-cosmic mt-4" onclick="showAlgorithm('insertion')">æŸ¥çœ‹æ¼”ç¤º</button>
            </div>
            
            <div class="algorithm-card p-6 glow-border">
                <div class="flex items-center mb-4">
                    <span class="text-4xl mr-3">â­</span>
                    <h2 class="text-2xl font-bold glow-text">åˆä½µæ’åº (Merge Sort)</h2>
                </div>
                <p class="mb-4">åˆä½µæ’åºå°±åƒæ˜Ÿç³»çš„åˆä½µã€‚å°‡è¡Œæ˜Ÿåˆ†æˆå°ç¾¤çµ„ï¼Œåˆ†åˆ¥æ’åºå¾Œå†åˆä½µï¼Œæœ€çµ‚å½¢æˆä¸€å€‹æœ‰åºçš„æ˜Ÿç³»ã€‚</p>
                <div class="code-tab">Python ä»£ç¢¼</div>
                <pre>def merge_sort(arr):
    if len(arr) > 1:
        # æ‰¾åˆ°ä¸­é–“é»ï¼Œåˆ†å‰²æ•¸çµ„
        mid = len(arr) // 2
        L = arr[:mid]
        R = arr[mid:]
        
        # éæ­¸æ’åºå…©åŠ
        merge_sort(L)
        merge_sort(R)
        
        # åˆå§‹åŒ–æŒ‡é‡
        i = j = k = 0
        
        # åˆä½µå…©å€‹å·²æ’åºçš„å­æ•¸çµ„
        while i < len(L) and j < len(R):
            if L[i] < R[j]:
                arr[k] = L[i]
                i += 1
            else:
                arr[k] = R[j]
                j += 1
            k += 1
        
        # æª¢æŸ¥æ˜¯å¦æœ‰å‰©é¤˜å…ƒç´ 
        while i < len(L):
            arr[k] = L[i]
            i += 1
            k += 1
            
        while j < len(R):
            arr[k] = R[j]
            j += 1
            k += 1
    
    return arr</pre>
                <button class="btn-cosmic mt-4" onclick="showAlgorithm('merge')">æŸ¥çœ‹æ¼”ç¤º</button>
            </div>
        </div>
        
        <div id="visualization-container" class="hidden">
            <div class="bg-gray-900 bg-opacity-70 rounded-xl p-6 mb-8 glow-border">
                <h2 class="text-2xl font-bold mb-4 glow-text" id="current-algorithm-title">æ’åºæ¼”ç®—æ³•è¦–è¦ºåŒ–</h2>
                
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <button class="btn-cosmic mr-2" id="start-btn">é–‹å§‹æ’åº</button>
                        <button class="btn-cosmic mr-2" id="reset-btn">é‡ç½®</button>
                    </div>
                    <div>
                        <label class="mr-2">é€Ÿåº¦:</label>
                        <input type="range" min="1" max="10" value="5" id="speed-slider" class="w-32">
                    </div>
                </div>
                
                <div class="flex flex-col items-center">
                    <h3 class="text-xl mb-4">æ­¥é©Ÿæ¼”ç¤ºï¼šæ’åº</h3>
                    <div id="array-container" class="flex justify-center items-end h-64 w-full mb-6"></div>
                    <p id="explanation" class="text-center text-lg"></p>
                </div>
            </div>
            
            <div class="bg-gray-900 bg-opacity-70 rounded-xl p-6 mb-8 glow-border">
                <h3 class="text-xl font-bold mb-4 glow-text">æ­¥é©Ÿèªªæ˜</h3>
                <div id="steps-container" class="step-container"></div>
            </div>
            
            <div class="bg-gray-900 bg-opacity-70 rounded-xl p-6 mb-8 glow-border">
                <h3 class="text-xl font-bold mb-4 glow-text">Python ä»£ç¢¼å¯¦ç¾</h3>
                <div id="code-container" class="w-full"></div>
            </div>
        </div>
    </div>

    <script>
        // Create starfield background
        function createStars() {
            const starfield = document.getElementById('starfield');
            const starsCount = 200;
            
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                
                // Random size
                const size = Math.random() * 3;
                
                // Random animation delay
                const delay = Math.random() * 4;
                
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDelay = `${delay}s`;
                
                starfield.appendChild(star);
            }
        }
        
        createStars();
        
        // Sorting visualization
        let array = [8, 4, 2, 9, 5, 1];
        let arrayBars = [];
        let animationSpeed = 500;
        let animationTimeout;
        let currentAlgorithm = '';
        
        function showAlgorithm(algorithm) {
            currentAlgorithm = algorithm;
            document.getElementById('visualization-container').classList.remove('hidden');
            
            // Set algorithm title
            const titles = {
                'selection': 'é¸æ“‡æ’åº (Selection Sort) ğŸª',
                'bubble': 'å†’æ³¡æ’åº (Bubble Sort) ğŸ›°ï¸',
                'insertion': 'æ’å…¥æ’åº (Insertion Sort) ğŸš€',
                'merge': 'åˆä½µæ’åº (Merge Sort) â­'
            };
            
            document.getElementById('current-algorithm-title').textContent = titles[algorithm];
            
            // Reset and initialize
            resetArray();
            createStepCards(algorithm);
            showAlgorithmCode(algorithm);
            
            // Scroll to visualization
            document.getElementById('visualization-container').scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        function resetArray() {
            clearTimeout(animationTimeout);
            array = [8, 4, 2, 9, 5, 1];
            renderArray();
            document.getElementById('explanation').textContent = '';
        }
        
        function renderArray() {
            const container = document.getElementById('array-container');
            container.innerHTML = '';
            arrayBars = [];
            
            const maxValue = Math.max(...array);
            const width = Math.floor(container.clientWidth / (array.length * 1.5));
            
            array.forEach((value, index) => {
                const height = (value / maxValue) * 200;
                
                const bar = document.createElement('div');
                bar.className = 'planet';
                bar.style.width = `${width}px`;
                bar.style.height = `${width}px`;
                bar.style.margin = '0 8px';
                bar.style.backgroundColor = getRandomPlanetColor();
                bar.style.fontSize = `${width / 2}px`;
                bar.textContent = value;
                
                container.appendChild(bar);
                arrayBars.push(bar);
            });
        }
        
        function getRandomPlanetColor() {
            const colors = [
                'rgb(100, 220, 255)', // Cyan
                'rgb(180, 100, 255)', // Purple
                'rgb(100, 255, 150)', // Green
                'rgb(255, 150, 100)', // Orange
                'rgb(255, 100, 200)'  // Pink
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function swapBars(i, j) {
            return new Promise(resolve => {
                // Highlight bars being compared
                arrayBars[i].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                arrayBars[j].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                
                setTimeout(() => {
                    // Swap values in array
                    [array[i], array[j]] = [array[j], array[i]];
                    
                    // Swap visual representation
                    const tempContent = arrayBars[i].textContent;
                    const tempColor = arrayBars[i].style.backgroundColor;
                    
                    arrayBars[i].textContent = arrayBars[j].textContent;
                    arrayBars[i].style.backgroundColor = arrayBars[j].style.backgroundColor;
                    
                    arrayBars[j].textContent = tempContent;
                    arrayBars[j].style.backgroundColor = tempColor;
                    
                    // Reset highlight
                    setTimeout(() => {
                        arrayBars[i].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                        arrayBars[j].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                        resolve();
                    }, animationSpeed / 2);
                }, animationSpeed / 2);
            });
        }
        
        function highlightBar(index, color = 'rgba(255, 255, 100, 0.9)') {
            return new Promise(resolve => {
                arrayBars[index].style.boxShadow = `0 0 20px ${color}`;
                setTimeout(() => {
                    arrayBars[index].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                    resolve();
                }, animationSpeed);
            });
        }
        
        function updateExplanation(text) {
            document.getElementById('explanation').textContent = text;
        }
        
        // Sorting Algorithms
        async function selectionSort() {
            const n = array.length;
            
            for (let i = 0; i < n - 1; i++) {
                updateExplanation(`å°‹æ‰¾å¾ä½ç½® ${i} åˆ° ${n-1} çš„æœ€å°å…ƒç´ `);
                let minIndex = i;
                
                // Highlight current position
                arrayBars[i].style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.9)';
                
                for (let j = i + 1; j < n; j++) {
                    // Highlight bar being compared
                    arrayBars[j].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                    
                    await new Promise(resolve => {
                        animationTimeout = setTimeout(() => {
                            if (array[j] < array[minIndex]) {
                                // Reset previous min
                                if (minIndex !== i) {
                                    arrayBars[minIndex].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                                }
                                minIndex = j;
                                // Highlight new min
                                arrayBars[minIndex].style.boxShadow = '0 0 20px rgba(255, 0, 0, 0.9)';
                            } else {
                                // Reset compared bar
                                arrayBars[j].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                            }
                            resolve();
                        }, animationSpeed);
                    });
                }
                
                if (minIndex !== i) {
                    updateExplanation(`äº¤æ›ä½ç½® ${i} å’Œä½ç½® ${minIndex} çš„å…ƒç´ `);
                    await swapBars(i, minIndex);
                }
                
                // Mark as sorted
                arrayBars[i].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
            }
            
            // Mark last element as sorted
            arrayBars[n-1].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
            updateExplanation('æ’åºå®Œæˆï¼');
        }
        
        async function bubbleSort() {
            const n = array.length;
            
            for (let i = 0; i < n - 1; i++) {
                let swapped = false;
                
                for (let j = 0; j < n - i - 1; j++) {
                    updateExplanation(`æ¯”è¼ƒä½ç½® ${j} å’Œä½ç½® ${j+1} çš„å…ƒç´ `);
                    
                    // Highlight bars being compared
                    arrayBars[j].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                    arrayBars[j+1].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                    
                    await new Promise(resolve => {
                        animationTimeout = setTimeout(() => {
                            if (array[j] > array[j+1]) {
                                swapped = true;
                                updateExplanation(`äº¤æ›ä½ç½® ${j} å’Œä½ç½® ${j+1} çš„å…ƒç´ `);
                                swapBars(j, j+1).then(resolve);
                            } else {
                                arrayBars[j].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                                arrayBars[j+1].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                                resolve();
                            }
                        }, animationSpeed);
                    });
                }
                
                // Mark the last element in this pass as sorted
                arrayBars[n-i-1].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
                
                if (!swapped) {
                    // Mark all remaining elements as sorted
                    for (let k = 0; k < n-i-1; k++) {
                        arrayBars[k].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
                    }
                    break;
                }
            }
            
            updateExplanation('æ’åºå®Œæˆï¼');
        }
        
        async function insertionSort() {
            const n = array.length;
            
            // Mark first element as sorted
            arrayBars[0].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
            
            for (let i = 1; i < n; i++) {
                updateExplanation(`å–å‡ºä½ç½® ${i} çš„å…ƒç´ ï¼Œå°‹æ‰¾æ’å…¥ä½ç½®`);
                
                // Highlight current element
                arrayBars[i].style.boxShadow = '0 0 20px rgba(255, 100, 100, 0.9)';
                
                await new Promise(resolve => {
                    animationTimeout = setTimeout(resolve, animationSpeed);
                });
                
                const key = array[i];
                let j = i - 1;
                
                while (j >= 0 && array[j] > key) {
                    updateExplanation(`å°‡ä½ç½® ${j} çš„å…ƒç´ ç§»åˆ°ä½ç½® ${j+1}`);
                    
                    // Highlight comparison
                    arrayBars[j].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                    
                    await new Promise(resolve => {
                        animationTimeout = setTimeout(() => {
                            array[j+1] = array[j];
                            arrayBars[j+1].textContent = array[j];
                            arrayBars[j+1].style.backgroundColor = arrayBars[j].style.backgroundColor;
                            
                            arrayBars[j].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
                            resolve();
                        }, animationSpeed);
                    });
                    
                    j--;
                }
                
                array[j+1] = key;
                
                // Update the visual for the inserted element
                await new Promise(resolve => {
                    animationTimeout = setTimeout(() => {
                        arrayBars[j+1].textContent = key;
                        arrayBars[j+1].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
                        resolve();
                    }, animationSpeed);
                });
            }
            
            updateExplanation('æ’åºå®Œæˆï¼');
        }
        
        async function mergeSort() {
            updateExplanation('åˆä½µæ’åºé–‹å§‹ï¼šå°‡æ•¸çµ„åˆ†è§£ç‚ºæ›´å°çš„éƒ¨åˆ†');
            await mergeSortHelper(0, array.length - 1);
            updateExplanation('æ’åºå®Œæˆï¼');
            
            // Mark all as sorted
            for (let i = 0; i < array.length; i++) {
                arrayBars[i].style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
            }
        }
        
        async function mergeSortHelper(start, end) {
            if (start < end) {
                const mid = Math.floor((start + end) / 2);
                
                // Highlight the current subarray
                for (let i = start; i <= end; i++) {
                    arrayBars[i].style.boxShadow = '0 0 20px rgba(255, 255, 100, 0.9)';
                }
                
                await new Promise(resolve => {
                    animationTimeout = setTimeout(() => {
                        updateExplanation(`åˆ†è§£ï¼šå¾ä½ç½® ${start} åˆ° ${end}`);
                        resolve();
                    }, animationSpeed);
                });
                
                // Reset highlight
                for (let i = start; i <= end; i++) {
                    arrayBars[i].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                }
                
                await mergeSortHelper(start, mid);
                await mergeSortHelper(mid + 1, end);
                await merge(start, mid, end);
            }
        }
        
        async function merge(start, mid, end) {
            updateExplanation(`åˆä½µï¼šå¾ä½ç½® ${start} åˆ° ${end}`);
            
            const leftSize = mid - start + 1;
            const rightSize = end - mid;
            
            // Create temporary arrays
            const leftArray = new Array(leftSize);
            const rightArray = new Array(rightSize);
            
            // Copy data to temporary arrays
            for (let i = 0; i < leftSize; i++) {
                leftArray[i] = array[start + i];
            }
            for (let j = 0; j < rightSize; j++) {
                rightArray[j] = array[mid + 1 + j];
            }
            
            // Highlight subarrays
            for (let i = start; i <= mid; i++) {
                arrayBars[i].style.boxShadow = '0 0 20px rgba(100, 100, 255, 0.9)';
            }
            for (let i = mid + 1; i <= end; i++) {
                arrayBars[i].style.boxShadow = '0 0 20px rgba(255, 100, 100, 0.9)';
            }
            
            await new Promise(resolve => {
                animationTimeout = setTimeout(resolve, animationSpeed);
            });
            
            // Merge the temporary arrays back
            let i = 0, j = 0, k = start;
            
            while (i < leftSize && j < rightSize) {
                if (leftArray[i] <= rightArray[j]) {
                    array[k] = leftArray[i];
                    
                    await updateArrayBar(k, leftArray[i]);
                    i++;
                } else {
                    array[k] = rightArray[j];
                    
                    await updateArrayBar(k, rightArray[j]);
                    j++;
                }
                k++;
            }
            
            // Copy remaining elements
            while (i < leftSize) {
                array[k] = leftArray[i];
                await updateArrayBar(k, leftArray[i]);
                i++;
                k++;
            }
            
            while (j < rightSize) {
                array[k] = rightArray[j];
                await updateArrayBar(k, rightArray[j]);
                j++;
                k++;
            }
        }
        
        async function updateArrayBar(index, value) {
            return new Promise(resolve => {
                animationTimeout = setTimeout(() => {
                    arrayBars[index].textContent = value;
                    arrayBars[index].style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.9)';
                    
                    setTimeout(() => {
                        arrayBars[index].style.boxShadow = '0 0 15px rgba(100, 220, 255, 0.5)';
                        resolve();
                    }, animationSpeed / 2);
                }, animationSpeed / 2);
            });
        }
        
        function createStepCards(algorithm) {
            const stepsContainer = document.getElementById('steps-container');
            stepsContainer.innerHTML = '';
            
            const steps = getAlgorithmSteps(algorithm);
            
            steps.forEach((step, index) => {
                const card = document.createElement('div');
                card.className = 'step-card';
                
                const stepNumber = document.createElement('div');
                stepNumber.className = 'text-lg font-bold mb-2';
                stepNumber.textContent = `æ­¥é©Ÿ ${index + 1}`;
                
                const stepDesc = document.createElement('p');
                stepDesc.textContent = step;
                
                card.appendChild(stepNumber);
                card.appendChild(stepDesc);
                stepsContainer.appendChild(card);
            });
        }
        
        function getAlgorithmSteps(algorithm) {
            switch(algorithm) {
                case 'selection':
                    return [
                        'å¾æœªæ’åºçš„è¡Œæ˜Ÿä¸­æ‰¾å‡ºæœ€å°çš„ä¸€é¡†',
                        'å°‡å®ƒèˆ‡æœªæ’åºå€åŸŸçš„ç¬¬ä¸€é¡†è¡Œæ˜Ÿäº¤æ›ä½ç½®',
                        'å·²æ’åºå€åŸŸå¢åŠ ä¸€é¡†è¡Œæ˜Ÿ',
                        'é‡è¤‡ä»¥ä¸Šæ­¥é©Ÿï¼Œç›´åˆ°æ‰€æœ‰è¡Œæ˜Ÿéƒ½æ’åºå®Œæˆ'
                    ];
                case 'bubble':
                    return [
                        'æ¯”è¼ƒç›¸é„°çš„å…©é¡†è¡Œæ˜Ÿ',
                        'å¦‚æœå‰ä¸€é¡†æ¯”å¾Œä¸€é¡†å¤§ï¼Œå‰‡äº¤æ›å®ƒå€‘çš„ä½ç½®',
                        'ä¸€è¼ªæ¯”è¼ƒå¾Œï¼Œæœ€å¤§çš„è¡Œæ˜Ÿæœƒã€Œå†’æ³¡ã€åˆ°æœ«å°¾',
                        'é‡è¤‡ä»¥ä¸Šæ­¥é©Ÿï¼Œæ¯æ¬¡æ’é™¤å·²æ’åºçš„è¡Œæ˜Ÿ'
                    ];
                case 'insertion':
                    return [
                        'å¾ç¬¬äºŒé¡†è¡Œæ˜Ÿé–‹å§‹ï¼Œå–å‡ºç•¶å‰è¡Œæ˜Ÿ',
                        'èˆ‡å·²æ’åºå€åŸŸçš„è¡Œæ˜Ÿå¾å³å‘å·¦æ¯”è¼ƒ',
                        'å¦‚æœå·²æ’åºçš„è¡Œæ˜Ÿæ›´å¤§ï¼Œå‰‡å°‡å®ƒå³ç§»ä¸€ä½',
                        'æ‰¾åˆ°åˆé©ä½ç½®å¾Œï¼Œå°‡ç•¶å‰è¡Œæ˜Ÿæ’å…¥'
                    ];
                case 'merge':
                    return [
                        'å°‡è¡Œæ˜Ÿåºåˆ—åˆ†æˆå…©åŠ',
                        'éæ­¸åœ°å°å…©åŠé€²è¡Œæ’åº',
                        'åˆä½µå…©å€‹å·²æ’åºçš„å­åºåˆ—',
                        'æ¯”è¼ƒå…©å€‹å­åºåˆ—çš„é¦–å…ƒç´ ï¼Œé¸æ“‡è¼ƒå°è€…æ”¾å…¥çµæœåºåˆ—'
                    ];
                default:
                    return [];
            }
        }
        
        function showAlgorithmCode(algorithm) {
            const codeContainer = document.getElementById('code-container');
            codeContainer.innerHTML = '';
            
            const codeTab = document.createElement('div');
            codeTab.className = 'code-tab';
            codeTab.textContent = 'Python ä»£ç¢¼';
            
            const pre = document.createElement('pre');
            pre.textContent = getAlgorithmCode(algorithm);
            
            codeContainer.appendChild(codeTab);
            codeContainer.appendChild(pre);
        }
        
        function getAlgorithmCode(algorithm) {
            switch(algorithm) {
                case 'selection':
                    return `def selection_sort(arr):
    n = len(arr)
    
    # éæ­·æ‰€æœ‰æ•¸çµ„å…ƒç´ 
    for i in range(n):
        # æ‰¾åˆ°æœªæ’åºéƒ¨åˆ†ä¸­çš„æœ€å°å…ƒç´ 
        min_idx = i
        for j in range(i+1, n):
            if arr[j] < arr[min_idx]:
                min_idx = j
                
        # å°‡æ‰¾åˆ°çš„æœ€å°å…ƒç´ èˆ‡ç¬¬ä¸€å€‹æœªæ’åºå…ƒç´ äº¤æ›
        arr[i], arr[min_idx] = arr[min_idx], arr[i]
    
    return arr

# æ¸¬è©¦
arr = [8, 4, 2, 9, 5, 1]
sorted_arr = selection_sort(arr)
print("æ’åºå¾Œï¼š", sorted_arr)  # è¼¸å‡º: [1, 2, 4, 5, 8, 9]`;
                case 'bubble':
                    return `def bubble_sort(arr):
    n = len(arr)
    
    # éæ­·æ‰€æœ‰æ•¸çµ„å…ƒç´ 
    for i in range(n):
        # æœ€å¾Œiå€‹å…ƒç´ å·²ç¶“å°±ä½
        swapped = False
        for j in range(0, n-i-1):
            # å¦‚æœç•¶å‰å…ƒç´ å¤§æ–¼ä¸‹ä¸€å€‹å…ƒç´ ï¼Œå‰‡äº¤æ›
            if arr[j] > arr[j+1]:
                arr[j], arr[j+1] = arr[j+1], arr[j]
                swapped = True
        
        # å¦‚æœåœ¨é€™è¼ªä¸­æ²’æœ‰ç™¼ç”Ÿäº¤æ›ï¼Œå‰‡æ•¸çµ„å·²æ’åº
        if not swapped:
            break
    
    return arr

# æ¸¬è©¦
arr = [8, 4, 2, 9, 5, 1]
sorted_arr = bubble_sort(arr)
print("æ’åºå¾Œï¼š", sorted_arr)  # è¼¸å‡º: [1, 2, 4, 5, 8, 9]`;
                case 'insertion':
                    return `def insertion_sort(arr):
    # éæ­·å¾ç¬¬äºŒå€‹å…ƒç´ åˆ°æœ€å¾Œä¸€å€‹å…ƒç´ 
    for i in range(1, len(arr)):
        key = arr[i]  # ç•¶å‰è¦æ’å…¥çš„å…ƒç´ 
        
        # å°‡æ¯”keyå¤§çš„å…ƒç´ å‘å³ç§»å‹•
        j = i-1
        while j >= 0 and key < arr[j]:
            arr[j+1] = arr[j]
            j -= 1
        arr[j+1] = key  # æ’å…¥keyåˆ°æ­£ç¢ºä½ç½®
    
    return arr

# æ¸¬è©¦
arr = [8, 4, 2, 9, 5, 1]
sorted_arr = insertion_sort(arr)
print("æ’åºå¾Œï¼š", sorted_arr)  # è¼¸å‡º: [1, 2, 4, 5, 8, 9]`;
                case 'merge':
                    return `def merge_sort(arr):
    if len(arr) > 1:
        # æ‰¾åˆ°ä¸­é–“é»ï¼Œåˆ†å‰²æ•¸çµ„
        mid = len(arr) // 2
        L = arr[:mid]
        R = arr[mid:]
        
        # éæ­¸æ’åºå…©åŠ
        merge_sort(L)
        merge_sort(R)
        
        # åˆå§‹åŒ–æŒ‡é‡
        i = j = k = 0
        
        # åˆä½µå…©å€‹å·²æ’åºçš„å­æ•¸çµ„
        while i < len(L) and j < len(R):
            if L[i] < R[j]:
                arr[k] = L[i]
                i += 1
            else:
                arr[k] = R[j]
                j += 1
            k += 1
        
        # æª¢æŸ¥æ˜¯å¦æœ‰å‰©é¤˜å…ƒç´ 
        while i < len(L):
            arr[k] = L[i]
            i += 1
            k += 1
            
        while j < len(R):
            arr[k] = R[j]
            j += 1
            k += 1
    
    return arr

# æ¸¬è©¦
arr = [8, 4, 2, 9, 5, 1]
sorted_arr = merge_sort(arr.copy())  # ä½¿ç”¨å‰¯æœ¬ä»¥ä¿ç•™åŸæ•¸çµ„
print("æ’åºå¾Œï¼š", sorted_arr)  # è¼¸å‡º: [1, 2, 4, 5, 8, 9]`;
                default:
                    return '';
            }
        }
        
        // Event listeners
        document.getElementById('start-btn').addEventListener('click', () => {
            switch(currentAlgorithm) {
                case 'selection':
                    selectionSort();
                    break;
                case 'bubble':
                    bubbleSort();
                    break;
                case 'insertion':
                    insertionSort();
                    break;
                case 'merge':
                    mergeSort();
                    break;
            }
        });
        
        document.getElementById('reset-btn').addEventListener('click', resetArray);
        
        document.getElementById('speed-slider').addEventListener('input', function() {
            animationSpeed = 1000 / this.value;
        });
        
        // Initialize
        window.onload = function() {
            renderArray();
        };
        
        window.addEventListener('resize', renderArray);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a477788723a08c0',t:'MTc2NDEzOTk4Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
